/*
*
* Form styles
* --------------------------------------------------
*/

//== Forms variables
//
$input-height: 50px;
$input-color: $gray;
$input-color-placeholder: $input-color;

$input-bg: $gray-1; 
$input-border: $input-bg;
$input-border-radius: $border-radius-base;

$input-font-size: 14px;
$input-line-height: 24px;
$input-font-weight: 400; 
 
$error-color: #f5543f;
$success-color: #98bf44;

$input-border-obj: 1px solid $input-border;
$input-padding-horizontal: 25px;
$input-line-height: round($input-font-size * 1.7);

$input-padding-vertical: round(($input-height - $input-line-height) / 2);
$input-padding: $input-padding-vertical $input-padding-horizontal;

@if ($input-border-obj != none) {
	$input-padding-vertical: round(($input-height - $input-line-height - (nth($input-border-obj, 1) * 2)) / 2);
	$input-padding: $input-padding-vertical $input-padding-horizontal;
}

$textarea-default-height:       135px;
$textarea-default-min-height:   $input-height;
$textarea-default-max-height:   round($textarea-default-height * 1.7);


//
// Form styles
// --------------------------------------------------

.rd-mailform {
	position: relative;
	text-align: left;

	.button {
		padding-top: 10px;
		padding-bottom: 10px;
		min-height: $input-height;
	}
	
	* + .button {
		margin-top: 25px;
	}
}

input:-webkit-autofill ~ label,
input:-webkit-autofill ~ .form-validation {
	color: $gray-base !important;
}

.form-label,
.form-label-outside {
	margin-bottom: 0;
	color: $text-color;
	font-weight: $input-font-weight;
}

.form-input {
	@include order(3);
	display: block;
	width: 100%;
	min-height: $input-height;
	padding: $input-padding-vertical $input-padding-horizontal;
	font-size: $input-font-size;
	font-weight: $input-font-weight;
	line-height: $input-line-height;
	color: $input-color;
	background-color: $input-bg;
	background-image: none;
	border-radius: $input-border-radius;
	-webkit-appearance: none;
	transition: .3s ease-in-out;

	@if ($input-border-obj) {
		border: $input-border-obj;
	}

	&:focus {
		outline: 0;
	}
}

textarea.form-input {
	height: $textarea-default-height;
	min-height: $textarea-default-min-height;
	max-height: $textarea-default-max-height;
	resize: vertical;
}

// Form wrapper
// -------------------------

.form-wrap {
	position: relative;
	@include display-flex;
	@include flex-direction(column);

	.button {
		width: 100%;
	}

	&.has-error {
		.form-input {
			border-color: $error-color;
		}
	}
}

.form-wrap + * {
	margin-top: 20px;
}

// Form labels
// -------------------------

.form-label {
	position: absolute;
	top: $input-height / 2; 
	left: 0;
	right: 0;
	padding-left: $input-padding-horizontal;
	padding-right: $input-padding-horizontal;
	font-size: $input-font-size;
	font-weight: $input-font-weight;
	line-height: $input-line-height;
	pointer-events: none;
	text-align: left;
	z-index: 9;
	transition: .25s;
	will-change: transform;
	transform: translateY(-50%);

	&.focus {
		opacity: 0;
	}

	&.auto-fill {
		color: $input-color;
	}

	[data-x-mode="true"] & {
		pointer-events: auto;
	}
}

.form-label-outside {
	margin-bottom: 4px;
	letter-spacing: .1em;
	text-transform: uppercase;
	
	@media (min-width: $screen-sm-min) {
		position: static;

		&,
		&.focus,
		&.auto-fill {
			transform: none;
		}
	}
}

.form-label-outside ~ .form-validation {
	@include order(2);
	top: 28px;
}

// Form validation
// -------------------------

.form-validation {
	position: absolute;
	right: 4px;
	top: 0;
	z-index: 11;
	margin-top: 2px;
	font-size: 9px;
	font-weight: 400;
	line-height: 12px;
	letter-spacing: 0;
	color: $error-color;
	transition: .3s;
}

.form-validation-left {
	.form-validation {
		right: auto;
		top: 100%;
		left: 0;
	}
}

// Form output
// -------------------------

#form-output-global {
	position: fixed;
	bottom: 30px;
	left: 15px;
	visibility: hidden;
	transform: translateX(-500px);
	transition: .3s all ease;
	z-index: 9999999;

	&.active {
		transform: translateX(0);
		visibility: visible;
	}

	@media (min-width: $screen-xs) {
		left: 30px;
	}
}

.form-output {
	position: absolute;
	top: 100%;
	left: 0;
	font-size: 10px;
	font-weight: 400;
	line-height: 1.2;
	margin-top: 2px;
	transition: .3s;
	opacity: 0;
	visibility: hidden;

	&.active {
		opacity: 1;
		visibility: visible;
	}

	&.error {
		color: $error-color;
	}

	&.success {
		color: $success-color;
	}
}

// Radio and Checkbox Custom
// -------------------------

// Base Styles
//
.radio .radio-custom,
.radio-inline .radio-custom,
.checkbox .checkbox-custom,
.checkbox-inline .checkbox-custom {
	opacity: 0;

	&, &-dummy {
		position: absolute;
		width: 14px;
		height: 14px;
		margin-left: -20px;
		margin-top: 5px;
		outline: none;
		cursor: pointer;
	}

	&-dummy {
		pointer-events: none;
		background: $white;
		box-shadow: inset 1px 1px 1px rgba(0, 0, 0, 0.15);

		&:after {
			position: absolute;
			opacity: 0;
		}
	}

	&:focus {
		outline: none;
	}
}

.radio-custom:checked + .radio-custom-dummy:after,
.checkbox-custom:checked + .checkbox-custom-dummy:after {
	opacity: 1;
}

// Custom Radio Styles
//
.radio,
.radio-inline {
	font-weight: 300;
	.radio-custom-dummy {
		border-radius: 50%;

		&:after {
			content: '';
			top: 3px;
			right: 3px;
			bottom: 3px;
			left: 3px;
			background: $gray-darker;
			border-radius: 50%;
		}
	}
}

// Custom Checkbox Styles
//
.checkbox,
.checkbox-inline {
	padding-left: 20px;
	font-weight: 300;
	.checkbox-custom-dummy {
		pointer-events: none;
		border-radius: 3px;
		margin-left: 0;
		left: 0;

		&:after {
			content: '\e5ca';
			font-family: 'Material Icons';
			font-size: 20px;
			line-height: 10px;
			position: absolute;
			top: 0;
			left: 0;
			color: $gray-darker;
		}
	}
}

.form-wrap.form-wrap-recaptcha {
	.form-validation {
		top: 3px;
		left: 14px;
	}
	
	@media (max-width: $screen-xs-min - 1px) {
		.recaptcha {
			> * {
        transform: scale(.96);
        transform-origin: 0 50%;
      }
		}
	}
}

// Mods
.rd-mailform.rd-mailform_label-centered {
	.form-label-outside {
		text-align: center;
	}
	
	* + .button {
		margin-top: 30px;
	}
	
	.form-input:focus {
		&::-webkit-input-placeholder { opacity: 0;}
		&::-moz-placeholder          { opacity: 0;}
		&:-moz-placeholder           { opacity: 0;}
		&:-ms-input-placeholder      { opacity: 0;}
	}
	
	@media (min-width: $screen-sm-min) {
		padding-left: 15px;
		padding-right: 15px;
		* + .button {
			margin-top: 40px;
		}
	}
	
	@media (min-width: $screen-xl-min) {
			* + .button { margin-top: 50px; }
	}
}

.rd-mailform.rd-mailform_inline {
	@include display-flex;
	@include flex-direction(row);
	@include flex-wrap(wrap);
	@include align-items(stretch);
	text-align: center;
	transform: translateY(-10px);
	margin-bottom: -10px;
	margin-left: -10px;

	> * {
		margin-top: 10px;
		margin-left: 10px;
	}

	.form-wrap {
		@include flex-grow(1);
		min-width: 185px;  
	}
	
	.form-input {
		box-shadow: 0 9px 21px 0 rgba(30, 30, 30, 0.38);
	}

	.button {
		max-width: calc(100% - 10px);
	}

	&-2 {
		.form-wrap {
			width: 100%;
		}
	}

	&-3 {
		.form-input {
			padding-right: 74px;
		}

		.button {
			position: absolute;
			right: 5px;
			top: 5px;
			bottom: 5px;
			min-height: 0;
			padding: 5px 20px;
			border: none;
			background: $primary;
			color: $gray-base;

			&:hover,
			&:focus {
				background: $gray-base;
				color: $white;
			}
		}

		.form-validation {
			right: 74px;
		}
	}
	
	@media (min-width: $screen-xs-min) {
		.button {
			width: auto;
			padding-top: 5px;
			padding-bottom: 5px;
			@include flex-shrink(0);
		}
	}
	
	&.rd-mailform_inline-centered {
		@include justify-content(center);
	}
}

.rd-mailform.rd-mailform_light {
	.form-label-outside {
		padding-left: 20px;
		margin-bottom: 6px;
		color: $text-color;
		text-align: left;
	}
	
	.form-validation {
		right: 5px;
	}
	
	.button {
		width: auto;
		padding-left: 20px;
		padding-right: 20px;
	}
}

.rd-mailform__outline {
	.form-input {
		background-color: transparent;
		border-color: #ebebeb;
	} 
}

.rd-mailform_sm {
	$input-height: 40px;

	.form-input,
	.button {
		padding-top: 9px;
		padding-bottom: 9px;
		min-height: $input-height;
	}
	
	.form-validation {
		top: -16px;
	} 
	
	.form-label {
		top: $input-height / 2;
	}
	
	* + .button {
		margin-top: 10px;
	}
}

.rd-mailform_centered {
	.form-input,
	.form-label {
		text-align: center;
	}
}